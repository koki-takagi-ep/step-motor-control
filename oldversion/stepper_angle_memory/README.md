# 28BYJ-48 ステッピングモーター 角度記憶システム

このプロジェクトは28BYJ-48ステッピングモーターを使用して角度制御を行い、さらに電源を切っても角度を記憶することができるArduinoプログラムです。

## 特徴

- 絶対角度指定（0〜360度）
- 相対角度指定（現在位置からの移動）
- 角度の記憶機能（EEPROM使用）
- 電源節約モード
- 速度プリセット（5段階）
- ホームポジションのリセット

## ハードウェア要件

- Arduino Uno/Nano/Mega など
- 28BYJ-48 ステッピングモーター
- ULN2003 ドライバーボード
- 5V電源（ドライバーボード用）

## 配線方法

| Arduino | ULN2003ドライバー |
|---------|------------------|
| D8      | IN1              |
| D9      | IN2              |
| D10     | IN3              |
| D11     | IN4              |
| 5V      | VCC              |
| GND     | GND              |

## 必要なライブラリ

- AccelStepper
- EEPROM (Arduino標準ライブラリ)

## コマンド一覧

| コマンド    | 説明                                          |
|------------|----------------------------------------------|
| a[角度]     | 絶対角度を指定（例: a90 で90度の位置へ移動）     |
| r[角度]     | 相対角度を指定（例: r45 で現在位置から45度移動） |
| z          | 現在位置を0度にリセット                         |
| s          | 現在の状態を表示                               |
| m          | メモリに保存された角度を表示                    |
| w          | 現在の角度をメモリに保存                       |
| l          | メモリから角度を読み込み                       |
| c          | メモリをクリア（工場出荷状態にリセット）         |
| p          | 電源節約モードの切り替え                       |
| v[1-5]     | 速度プリセットを選択（1:遅い, 3:通常, 5:高速）  |
| h          | ヘルプメッセージを表示                         |

## 使用方法

1. Arduinoにプログラムを書き込む
2. シリアルモニタを開く（ボーレート: 9600）
3. コマンドを入力して制御する

## 技術仕様

- 28BYJ-48の1回転のステップ数: 4096（ハーフステップモード）
- EEPROMの使用: 8バイト（フラグ: 4バイト、角度: 4バイト）
- デフォルト速度: 1000 steps/sec

## 注意事項

- 角度の値は自動的に0〜360度の範囲に正規化されます
- 電源節約モードがオンの場合、目標位置に到達すると電流が切られます
- モーターの最大速度は負荷や電源電圧によって変わります（約1100-1200 steps/sec）
- EEPROMの寿命は約10万回の書き込みです。頻繁に書き込みを行うと寿命が短くなります

## 作成者

作成者: Koki Takagi  
作成日: 2025年5月10日

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。
