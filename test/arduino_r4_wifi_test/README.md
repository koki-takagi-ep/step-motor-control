# Arduino R4 Wi-Fi 通信テスト

このプロジェクトは、Arduino R4 Wi-FiボードをWi-Fi経由でPCと通信させるシンプルなテストプログラムです。Arduino IDEのシリアルモニターを使ってArduinoと通信できます。また、Wi-Fi経由でTCP/IP接続も可能です。

## 機能

- Wi-Fiネットワークへの接続
- シリアルモニターからのコマンド処理
- TCP/IPサーバーの起動（オプション）
- LEDの制御（ON/OFF/点滅）
- シミュレーションセンサーデータの表示（温度）
- システム情報の表示（Wi-Fi状態、稼働時間など）

## 必要なもの

- Arduino R4 Wi-Fiボード
- Wi-Fi環境（オプション）
- Arduino IDE
- USBケーブル

## セットアップ手順

1. Arduino IDEを開く
2. arduino_r4_wifi_test.inoファイルを開く
3. Wi-Fi接続を使用する場合は、スケッチ内のWi-Fi設定を変更する:
   ```cpp
   const char* ssid = "あなたのWi-Fi SSID";     // ここを実際のWi-Fi SSIDに変更
   const char* password = "あなたのWi-Fiパスワード"; // ここを実際のWi-Fiパスワードに変更
   ```
4. Arduino R4 Wi-Fiボードをコンピュータに接続
5. Arduino IDEでArduino R4 Wi-Fiボードを選択
6. スケッチをコンパイルしてアップロード
7. シリアルモニターを開く（9600bps）

## 使用方法

### シリアルモニター経由の操作

Arduino IDEのシリアルモニターを開き（ボーレート9600）、以下のコマンドを送信できます：

- `ON` - 内蔵LEDをオンにする
- `OFF` - 内蔵LEDをオフにする
- `BLINK` - 内蔵LEDを5回点滅させる
- `TEMP` - シミュレーションされた温度データを取得
- `STATUS` - システム状態を表示（Wi-Fi接続状態、稼働時間など）
- `HELP` - コマンド一覧を表示

シリアルモニターの送信設定が「改行」になっていることを確認してください。

### Wi-Fi経由の操作（オプション）

1. Wi-Fi設定が正しく、Arduino R4 Wi-Fiがネットワークに接続されていることを確認
2. シリアルモニターに表示されるIPアドレスをメモ
3. 任意のTCPクライアントソフトウェアを使用（例：Tera Term、PuTTY、netcatなど）
4. クライアントソフトでArduinoのIPアドレスとポート8888に接続
5. シリアルモニターと同じコマンドを送信して操作

### TCP接続例（ターミナル使用）

macOSやLinuxのターミナルから接続する場合：
```
nc <Arduino_IPアドレス> 8888
```

Windowsのコマンドプロンプトから接続する場合：
```
telnet <Arduino_IPアドレス> 8888
```

## 動作確認方法

1. スケッチをアップロードする
2. シリアルモニターを開く（9600bps）
3. 初期化メッセージが表示され、Wi-Fiへの接続が行われます
4. Wi-Fi接続に成功すると、IPアドレスが表示されます
5. `HELP`コマンドを入力して、使用可能なコマンド一覧を確認
6. 各種コマンド（ON, OFF, BLINK, TEMP, STATUS）を試す
7. Wi-Fi接続が成功していれば、別のデバイスからTCP接続して同様に操作可能

## トラブルシューティング

- **Wi-Fi接続エラー**: SSIDとパスワードが正しいか確認。Wi-Fi接続に失敗してもシリアルモードで動作します。
- **LEDが反応しない**: ボードの選択が正しいか確認。一部のボードでは内蔵LEDのピン番号が異なる場合があります。
- **コマンドが認識されない**: シリアルモニターの改行設定を確認。
- **TCP接続できない**: ファイアウォール設定を確認。同じネットワーク内にいることを確認。

## 拡張アイデア

- 実際のセンサー（温度、湿度、光など）の追加
- WebサーバーとしてArduinoを設定し、ブラウザからアクセス可能に
- より複雑なコマンド体系の実装
- データログ機能の追加

## ライセンス

MITライセンス

---

*注: このテストプログラムは教育・実験目的で作成されています。実際の製品開発には、セキュリティ対策やエラー処理の強化が必要です。*
